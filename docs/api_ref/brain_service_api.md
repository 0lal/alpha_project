ุจุตูุชู **ูุจูุฑ ูููุฏุณู ุงูุฐูุงุก ุงูุงุตุทูุงุนู (Lead AI Architect)** ููุณุคูู ูุงุฌูุงุช ุงูุงุณุชุฏูุงูุ ุณุฃููู ุจุตูุงุบุฉ `docs/api_ref/brain_service_api.md`.

ูุฐุง ุงูููู ูู **"ูุชูุจ ุงูุชุฎุงุทุฑ"**.
ุงูุนูู (`Brain`) ููุณ ูุฌุฑุฏ ุตูุฏูู ุฃุณูุฏ ูุฑูู ุฃูุงูุฑ ุดุฑุงุก ูุจูุน. ุฅูู ููุงู ูุนูุฏ ูุญูู ุงููุดุงุนุฑุ ูุชููุน ุงููุณุชูุจูุ ููุฏูุฑ ุงููุฎุงุทุฑ ุงูุงุณุชุฑุงุชูุฌูุฉ.
ููุชูุงุนู ูุนู (ุณูุงุก ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุทูุจ ุชุญูููุ ุฃู ูู ุงููุญุฑู ูุทูุจ ุชููุน)ุ ูุญุชุงุฌ ุฅูู ูุบุฉ ูุดุชุฑูุฉ ุฏูููุฉ ุฌุฏุงู.
ูุฐู ุงููุซููุฉ ุชุญุฏุฏ ููููุฉ ุชูุฌูู ุงูุฃุณุฆูุฉ ููุนููุ ูููููุฉ ุชูุณูุฑ ุฅุฌุงุจุงุชูุ ููุง ูู "ุฃููุงุท ุงูุชูููุฑ" ุงููุชุงุญุฉ.

ุฅููู ุงููุซููุฉ ุงููุงููุฉ ุจุตูุบุฉ Markdown:

### ุงูููู: `docs/api_ref/brain_service_api.md`

```markdown
# ALPHA SOVEREIGN - BRAIN SERVICE API REFERENCE
================================================================================
**Component:** Brain (The Core Logic)
**Interface Type:** ZMQ REQ/REP (Commands) & PUB/SUB (Insights)
**Consumer:** Rust Engine, Flutter UI, Ops Dashboard
**Protocol:** JSON (for UI/Ops) & Protobuf (for Engine)
**Last Updated:** 2026-02-03
================================================================================

## 1. Overview (ูุธุฑุฉ ุนุงูุฉ)

ุชููุฑ ุฎุฏูุฉ ุงูุนูู (`BrainService`) ูุงุฌูุฉ ููุงุณุชุฏูุงู ุงููุนุฑูู.
ุฎูุงูุงู ูููุญุฑู ุงูุฐู ูุนูู ุจุฑุฏูุฏ ูุนู ูุงูู-ุซุงููุฉุ ุงูุนูู ูุนูู ูู ุฅุทุงุฑ ุฒููู "ุชูููุฑู" (ูููุฑู-ุซุงููุฉ ุฅูู ุซูุงูู).
ูุชู ุงูุชูุงุตู ุนุจุฑ ููุงุฉ **ZMQ Command Channel** (ุงููููุฐ 5556).



---

## 2. Command Structure (ูููููุฉ ุงูุฃูุงูุฑ)

ุฌููุน ุงูุทูุจุงุช ุงูููุฌูุฉ ููุนูู ุชุชุจุน ุงููููู ุงูููุญุฏ ุงูุชุงูู (ูุบููุฉ ุจู JSON ุฃู Protobuf):

```json
{
  "request_id": "uuid-v4",
  "method": "METHOD_NAME",
  "params": { ... },
  "timestamp": 1678888888
}

```

---

## 3. Cognitive Methods (ุฏูุงู ุงูุงุณุชุฏูุงู)

ูุฐู ุงูุฃูุงูุฑ ุชุทูุจ ูู ุงูุนูู "ุงูุชูููุฑ" ูุฅุฑุฌุงุน ูุชูุฌุฉ.

### `analyze_market_context`

* **Description:** ุทูุจ ุชุญููู ุดุงูู ููุณูู ุงูุญุงูู (ููู + ูุดุงุนุฑ + ุณูููุฉ).
* **Input:**
```json
{ "symbol": "BTCUSDT", "timeframe": "1h" }

```


* **Output:**
```json
{
  "sentiment": "BULLISH",
  "volatility_index": 0.45,
  "regime": "TRENDING_UP",
  "confidence": 0.88
}

```



### `predict_price_trajectory`

* **Description:** ุทูุจ ุชูุจุค ุจุญุฑูุฉ ุงูุณุนุฑ ููู N ุดูุนุงุช ุงููุงุฏูุฉ ุจุงุณุชุฎุฏุงู ููุงุฐุฌ `Transformers`.
* **Input:**
```json
{ "symbol": "ETHUSDT", "horizon_steps": 5 }

```


* **Output:**
```json
{
  "predicted_path": [1800.5, 1802.1, 1801.0, 1805.5, 1810.0],
  "lower_bound": 1795.0,
  "upper_bound": 1820.0
}

```



### `query_vector_memory`

* **Description:** ุณุคุงู ุงูุฐุงูุฑุฉ ุทูููุฉ ุงููุฏู: "ูู ุฑุฃููุง ูุฐุง ุงูููุท ูู ูุจูุ"
* **Input:**
```json
{ "current_pattern_embedding": [ ... ], "limit": 3 }

```


* **Output:**
* ูุงุฆูุฉ ุจุฃูุฑุจ 3 ุณููุงุฑูููุงุช ุชุงุฑูุฎูุฉ ูุดุงุจูุฉ ููุงุฐุง ุญุฏุซ ุจุนุฏูุง (ุงููุชูุฌุฉ).



---

## 4. Control Methods (ุฏูุงู ุงูุชุญูู)

ูุฐู ุงูุฃูุงูุฑ ุชุบูุฑ "ุงูุญุงูุฉ ุงูููุณูุฉ" ุฃู ุงูุงุณุชุฑุงุชูุฌูุฉ ููุนูู.

### `set_strategy_mode`

* **Description:** ุชุบููุฑ ูุถุน ุงูุชุดุบูู ุงูุงุณุชุฑุงุชูุฌู.
* **Input:** `mode` (Enum)
* `SCALPING`: ุณุฑุนุฉ ุนุงููุฉุ ุฃุฑุจุงุญ ุตุบูุฑุฉ.
* `SWING`: ุฃูุงู ุนุงููุ ุตููุงุช ุฃุทูู.
* `DEFENSIVE`: ุฅููุงู ุงูุดุฑุงุกุ ุงูุชุฑููุฒ ุนูู ุญูุงูุฉ ุฑุฃุณ ุงููุงู.
* `DORMANT`: ูุถุน ุงูุณููู (ูุฑุงูุจุฉ ููุท).



### `reload_models`

* **Description:** ุฅุฌุจุงุฑ ุงูุนูู ุนูู ุฅุนุงุฏุฉ ุชุญููู ุฃูุฒุงู ุงูุดุจูุงุช ุงูุนุตุจูุฉ (ูุซูุงู ุจุนุฏ ุชุฏุฑูุจ ุฌุฏูุฏ).
* **Response:** `ACK` (ุจุนุฏ ุงูุงูุชูุงุก).

### `inject_human_bias`

* **Description:** ุฅุฏุฎุงู ุชุญูุฒ ุจุดุฑู ูุฏูู (ูุซูุงู: "ููุงู ุฃุฎุจุงุฑ ุญุฑุจุ ูู ุญุฐุฑุงู").
* **Input:**
```json
{ "bias_type": "BEARISH", "weight": 0.5, "duration_minutes": 60 }

```


* **Engineering Impact:** ูุถูู ูุฐุง ุงูุชุญูุฒ ุทุจูุฉ "Penalty" ุนูู ูุฑุงุฑุงุช ุงูุดุฑุงุก ููุชุฑุฉ ูุญุฏุฏุฉ.

---

## 5. Broadcast Signals (ุฅุดุงุฑุงุช ุงูุจุซ)

ุงูุนูู ูุง ูุชุญุฏุซ ููุท ุนูุฏูุง ููุณุฃูุ ุจู ูุจุซ ุฃููุงุฑู ุนุจุฑ **ZMQ PUB (Port 5558)**.

* **Topic:** `BRAIN.THOUGHT`
* ูุจุซ ุนูููุฉ ุงุชุฎุงุฐ ุงููุฑุงุฑ ุงูุฏุงุฎููุฉ (ูุฃุบุฑุงุถ ุงูุดูุงููุฉ ูู ุงูู UI).
* *Example:* "Rejected buy order because RSI is too high (85)."


* **Topic:** `BRAIN.ANOMALY`
* ูุจุซ ุชุญุฐูุฑุงุช ุนูุฏ ุงูุชุดุงู ุดุฐูุฐ ูู ุงูุจูุงูุงุช.
* *Example:* "Flash crash detected on XRP. Freezing trading."



---

## 6. Error Codes (ุฑููุฒ ุงูุฎุทุฃ)

ููู ูููู ุงูุนูู "ูุง ุฃุนุฑู"ุ

| Error Code | Meaning | Action |
| --- | --- | --- |
| `ERR_MODEL_NOT_READY` | ุงูููุงุฐุฌ ูู ุชูุชูู ุชุญููููุง ุจุนุฏ. | ุงูุชุธุฑ `brain_ready` signal. |
| `ERR_INSUFFICIENT_DATA` | ูุง ููุฌุฏ ุชุงุฑูุฎ ูุงูู ูู QuestDB ููุชุญููู. | ุงูุชุธุฑ ุชุฌููุน ุงูุจูุงูุงุช. |
| `ERR_UNCERTAIN` | ุงูุซูุฉ ูู ุงูุชูุจุค ุฃูู ูู ุงูุนุชุจุฉ (Threshold). | ูุง ุชุชุฎุฐ ุฅุฌุฑุงุก. |
| `ERR_HALLUCINATION_GUARD` | ุชู ุฑูุถ ุงููุชูุฌุฉ ูุฃููุง ุบูุฑ ููุทููุฉ (Sanity Check Failed). | ุชุฌุงูู ุงููุชูุฌุฉ. |

---

> **Forensic Note:** All interactions with the Brain API are logged to the `blackbox` with the exact input parameters and the resulting inference. This allows us to "replay" the thought process during post-mortem analysis.

```

### ุงูุชุญููู ุงูููุฏุณู (Engineering Impact):

1.  **ุงูุดูุงููุฉ ุงููุนุฑููุฉ (`Cognitive Transparency`):**
    * ูุฌูุฏ ููุงุฉ ุจุซ `BRAIN.THOUGHT` ูู ููุฒุฉ ุญูููุฉ. ูู ุชุญูู ุงูุตูุฏูู ุงูุฃุณูุฏ (AI) ุฅูู ุตูุฏูู ุฒุฌุงุฌู. ุจุฏูุงู ูู ุฃู ูุฑู ููุท "ุดุฑุงุก"ุ ูุฑู "ุดุฑุงุก ูุฃู ุงูููุท ูุดุจู ุนุงู 2020 ููุฃู ุงูุฒุฎู ุฅูุฌุงุจู". ูุฐุง ูุจูู ุงูุซูุฉ ุจูู ุงูุฅูุณุงู ูุงูุขูุฉ.

2.  **ุญูุงูุฉ ุงููููุณุฉ (`Hallucination Guard`):**
    * ุฑูุฒ ุงูุฎุทุฃ `ERR_HALLUCINATION_GUARD` ูุดูุฑ ุฅูู ูุฌูุฏ ุทุจูุฉ ุจุฑูุฌูุฉ (Hard-coded Logic) ุชูุญุต ูุฎุฑุฌุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู. ุฅุฐุง ูุงู ุงูู AI "ุงูุณุนุฑ ุณูุตู ููููููู ุบุฏุงู"ุ ูุฐู ุงูุทุจูุฉ ุชุฑูุถ ุงููุฑุงุฑ ููุฑุงู ูุฃูู ุฅุญุตุงุฆูุงู ูุณุชุญูู (Outlier).

3.  **ุงูุชุญูุฒ ุงูุจุดุฑู (`Human Bias Injection`):**
    * ูุฐู ุงูุฏุงูุฉ (`inject_human_bias`) ุชุณูุญ ูููุชุฏุงูู ุจุงูุชุฏุฎู ุฏูู ุฅููุงู ุงูุจูุช. ูู ุทุฑููุฉ ูุฏูุฌ "ุงูุญุฏุณ ุงูุจุดุฑู" ูุน "ุงูุญุณุงุจ ุงูุขูู" ุจุดูู ุฑููู ููุงุณ (`weight` ู `duration`).

---

### **ุฅุนูุงู ุงูุชูุงุก ูุงูุฉ ุงููุซุงุฆู (All Docs Complete) ๐**

ููุฏ ุฃููููุง:
* **Blueprints:** (Architecture, IPC, Hardware).
* **Knowledge Base:** (Incidents, Wisdom).
* **Legal:** (Compliance, Privacy).
* **API Refs:** (Rust Engine, Brain Service).

ุงูุขูุ ุงููุธุงู ููุซู ุจุงููุงูู. ูุง ุชูุฌุฏ ุฒุงููุฉ ูุธููุฉ.
ูู ุดูุก ุฌุงูุฒ ูุงุณุชูุจุงู ุงูููุฏ.

**ุงููุญุธุฉ ุงูุญุงุณูุฉ:**
ูุญู ููู ุงูุขู ุฃูุงู ุงูุจุงุจ ุงูููุชูุญ ูููุฌูุฏ **`shield/core`**.
ุงูููู ุงููุงุฏู ูู: **`shield/core/brain_router.py`**.

ูู ุฃูุช ูุณุชุนุฏ ูุจุฏุก ูุชุงุจุฉ ุฃูู ุณุทุฑ ูู ุนูู ุงููุธุงูุ

```